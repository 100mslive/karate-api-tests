{"failedCount":0,"prefixedPath":"classpath:websockets\/websocket.feature","packageQualifiedName":"websockets.websocket","loopIndex":-1,"relativePath":"websockets\/websocket.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":11646917,"millis":11.646917,"status":"passed"},"step":{"line":4,"prefix":"*","index":0,"text":"def handler = function(msg){ return msg.contains('track-update') }"},"stepLog":"12:13:35.622 karate.env system property was: null \n"},{"result":{"nanos":762314084,"millis":762.314084,"status":"passed"},"step":{"line":5,"prefix":"And","index":1,"text":"def socket = karate.webSocket('wss:\/\/qa-in2.100ms.live\/v2\/ws?peer=686ee637-d645-48b7-8f72-611a2f02c44e&token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhY2Nlc3Nfa2V5IjoiNjJjNjk2YTg4YzllN2Y3Nzk2Y2Q5ZWM1Iiwicm9vbV9pZCI6IjYyYzY5OTQyYjAxODk0MTk3NDQwNmY1ZSIsInVzZXJfaWQiOiI0MTU2MTkxYS1lYWIzLTQ5OTItOGMxZS03NDBjNTQ5N2MzMTciLCJyb2xlIjoiYnJvYWRjYXN0ZXIiLCJqdGkiOiI3OGFhZDJiZC1lZDI2LTQ5OGMtYWFiMC04YjZlMjhjMjY2OTYiLCJ0eXBlIjoiYXBwIiwidmVyc2lvbiI6MiwiZXhwIjoxNjU3MzQ3ODIwfQ.izmNfmS5hnDe2vDXM9sEUJt-FzyMrNvpq-_EephViAI&user_agent=hmsclient%2F0.2.5-alpha.0+web_Mac_OS%2F10.15.7+Chrome_103.0.0.0')"}},{"result":{"nanos":9008000,"millis":9.008,"status":"passed"},"step":{"line":6,"prefix":"When","index":2,"text":"socket.send('{\"method\":\"track-update\",\"params\":{\"version\":\"1.0\",\"tracks\":{\"247cc403-0b99-4df0-91e3-9ac3549743c2\":{\"type\":\"audio\",\"source\":\"regular\",\"description\":\"\",\"mute\":true,\"track_id\":\"247cc403-0b99-4df0-91e3-9ac3549743c2\",\"stream_id\":\"00c21031-d4aa-4b47-a278-456c4f9ff7d6\"}}}}')"}},{"result":{"nanos":9458250,"millis":9.45825,"status":"passed"},"step":{"line":7,"prefix":"And","index":3,"text":"def res2 = socket.listen(1000);"}},{"result":{"nanos":1396708,"millis":1.396708,"status":"passed"},"step":{"line":8,"prefix":"Then","index":4,"text":"print res2"},"stepLog":"12:13:36.473 [print] {\"method\":\"on-role-change\",\"params\":{\"role\":{\"name\":\"broadcaster\",\"publishParams\":{\"allowed\":[\"audio\",\"video\",\"screen\"],\"audio\":{\"bitRate\":32,\"codec\":\"opus\"},\"video\":{\"bitRate\":850,\"codec\":\"vp8\",\"frameRate\":30,\"width\":1280,\"height\":720},\"screen\":{\"codec\":\"vp8\",\"frameRate\":10,\"width\":1920,\"height\":1080},\"videoSimulcastLayers\":{},\"screenSimulcastLayers\":{}},\"subscribeParams\":{\"subscribeToRoles\":[\"broadcaster\"],\"maxSubsBitRate\":8000,\"subscribeDegradation\":{\"packetLossThreshold\":25,\"degradeGracePeriodSeconds\":1,\"recoverGracePeriodSeconds\":4}},\"permissions\":{\"endRoom\":true,\"removeOthers\":true,\"mute\":true,\"unmute\":true,\"changeRole\":true,\"sendRoomState\":false},\"priority\":5,\"maxPeerCount\":0}},\"jsonrpc\":\"2.0\"}\n \n"}],"executorName":"pool-1-thread-1","line":3,"name":"demo ws tests","description":"","durationMillis":793.823959,"startTime":1657262615469,"failed":false,"refId":"[1:3]","endTime":1657262616473,"exampleIndex":-1}],"callDepth":0,"name":"Test websockets","description":"","resultDate":"2022-07-08 12:13:36 pm","durationMillis":793.823959,"passedCount":1}